<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-item {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { border-left: 5px solid #4CAF50; }
        .error { border-left: 5px solid #f44336; }
        .pending { border-left: 5px solid #FFC107; }
        h1 { color: #333; }
        pre {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .status { font-weight: bold; }
    </style>
</head>
<body>
    <h1>üîç Japanese Quiz App - Setup Test</h1>
    <p>This page will test if your files are in the correct location.</p>
    
    <div id="test1" class="test-item pending">
        <h3>Test 1: Current Page Location</h3>
        <p class="status">Testing...</p>
        <pre id="location"></pre>
    </div>
    
    <div id="test2" class="test-item pending">
        <h3>Test 2: Vocab JSON File</h3>
        <p class="status">Testing...</p>
        <pre id="vocab-result"></pre>
    </div>
    
    <div id="test3" class="test-item pending">
        <h3>Test 3: JavaScript Files</h3>
        <p class="status">Testing...</p>
        <pre id="js-result"></pre>
    </div>
    
    <div id="test4" class="test-item pending">
        <h3>Test 4: CSS Files</h3>
        <p class="status">Testing...</p>
        <pre id="css-result"></pre>
    </div>

    <script>
        // Test 1: Show current location
        const test1 = document.getElementById('test1');
        const locationPre = document.getElementById('location');
        locationPre.textContent = `URL: ${window.location.href}\nProtocol: ${window.location.protocol}\nHostname: ${window.location.hostname}\nPort: ${window.location.port}`;
        
        if (window.location.protocol === 'file:') {
            test1.classList.remove('pending');
            test1.classList.add('error');
            test1.querySelector('.status').textContent = '‚ùå ERROR: Using file:// protocol';
            locationPre.textContent += '\n\n‚ö†Ô∏è You must use a web server!\nThe file:// protocol will not work with fetch().\n\nRun: python -m http.server 8000\nThen open: http://localhost:8000/test.html';
        } else {
            test1.classList.remove('pending');
            test1.classList.add('success');
            test1.querySelector('.status').textContent = '‚úì Web server detected';
        }

        // Test 2: Load vocab.json
        async function testVocab() {
            const test2 = document.getElementById('test2');
            const vocabResult = document.getElementById('vocab-result');
            
            try {
                const response = await fetch('assets/data/vocab.json');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                const data = await response.json();
                
                test2.classList.remove('pending');
                test2.classList.add('success');
                test2.querySelector('.status').textContent = `‚úì SUCCESS: Loaded ${data.length} vocabulary items`;
                vocabResult.textContent = `File found at: assets/data/vocab.json\nSize: ${JSON.stringify(data).length} bytes\nFirst item: ${data[0].hiragana} = ${data[0].english}`;
            } catch (error) {
                test2.classList.remove('pending');
                test2.classList.add('error');
                test2.querySelector('.status').textContent = '‚ùå FAILED';
                vocabResult.textContent = `Error: ${error.message}\n\nMake sure:\n1. You're running the server from the japanese-quiz-app folder\n2. The assets/data/ folder exists with vocab.json inside\n3. Run 'ls assets/data/' to verify`;
            }
        }

        // Test 3: Check JS files
        async function testJS() {
            const test3 = document.getElementById('test3');
            const jsResult = document.getElementById('js-result');
            const files = ['app.js', 'data-manager.js', 'quiz-controller.js', 'state.js', 'ui.js', 'settings.js'];
            const results = [];
            
            for (const file of files) {
                try {
                    const response = await fetch(`assets/js/${file}`);
                    if (response.ok) {
                        results.push(`‚úì ${file}`);
                    } else {
                        results.push(`‚ùå ${file} (${response.status})`);
                    }
                } catch (error) {
                    results.push(`‚ùå ${file} (${error.message})`);
                }
            }
            
            const allSuccess = results.every(r => r.startsWith('‚úì'));
            test3.classList.remove('pending');
            test3.classList.add(allSuccess ? 'success' : 'error');
            test3.querySelector('.status').textContent = allSuccess ? '‚úì All JavaScript files found' : '‚ùå Some files missing';
            jsResult.textContent = results.join('\n');
        }

        // Test 4: Check CSS
        async function testCSS() {
            const test4 = document.getElementById('test4');
            const cssResult = document.getElementById('css-result');
            
            try {
                const response = await fetch('assets/css/styles.css');
                if (response.ok) {
                    const text = await response.text();
                    test4.classList.remove('pending');
                    test4.classList.add('success');
                    test4.querySelector('.status').textContent = '‚úì CSS file found';
                    cssResult.textContent = `File: assets/css/styles.css\nSize: ${text.length} bytes`;
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                test4.classList.remove('pending');
                test4.classList.add('error');
                test4.querySelector('.status').textContent = '‚ùå CSS file not found';
                cssResult.textContent = `Error: ${error.message}`;
            }
        }

        // Run all tests
        testVocab();
        testJS();
        testCSS();
    </script>

    <div style="margin-top: 30px; padding: 20px; background: #e3f2fd; border-radius: 8px;">
        <h3>üìã What to do if tests fail:</h3>
        <ol>
            <li><strong>Make sure you're in the right directory:</strong>
                <pre>cd japanese-quiz-app
ls
# You should see: index.html, assets/, data/, README.md</pre>
            </li>
            <li><strong>Start your web server:</strong>
                <pre>python -m http.server 8000</pre>
            </li>
            <li><strong>Open in browser:</strong>
                <pre>http://localhost:8000/test.html</pre>
            </li>
            <li><strong>If all tests pass:</strong> Open <a href="index.html">index.html</a> to use the quiz!</li>
        </ol>
    </div>
</body>
</html>
